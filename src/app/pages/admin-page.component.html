<div class="container mt-4">
  <h2>Administration</h2>
  <ul class="nav nav-tabs" id="adminTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link" [class.active]="activeTab === 'user-metrics'" (click)="activeTab = 'user-metrics'" type="button" role="tab">Métriques Utilisateurs</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" [class.active]="activeTab === 'nutrition'" (click)="activeTab = 'nutrition'" type="button" role="tab">Analyses Nutritionnelles</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" [class.active]="activeTab === 'fitness'" (click)="activeTab = 'fitness'" type="button" role="tab">Statistiques Fitness</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" [class.active]="activeTab === 'kpi'" (click)="activeTab = 'kpi'" type="button" role="tab">KPIs Business</button>
    </li>
  </ul>
  <div class="mt-3">
    <div *ngIf="activeTab === 'user-metrics'">
      <h5>Répartition par âge</h5>
      <table class="table table-striped table-bordered">
        <thead><tr><th>Tranche d'âge</th><th>Utilisateurs</th></tr></thead>
        <tbody>
          <tr *ngFor="let row of userMetricsAge"><td>{{row.age}}</td><td>{{row.count}}</td></tr>
        </tbody>
      </table>
      <h5>Objectifs</h5>
      <ul>
        <li *ngFor="let obj of userMetricsGoals">{{obj.label}} : {{obj.value}}</li>
      </ul>
      <h5>Taux de progression</h5>
      <div class="progress mb-2">
        <div class="progress-bar bg-success" [style.width]="userMetricsProgress + '%'">{{userMetricsProgress}}% atteints</div>
      </div>
    </div>
    <div *ngIf="activeTab === 'nutrition'">
      <h5>Analyses Nutritionnelles</h5>
      <p>Voici un aperçu des apports moyens par utilisateur :</p>
      <table class="table table-hover table-bordered">
        <thead><tr><th>Nutriment</th><th>Apport Moyen</th></tr></thead>
        <tbody>
          <tr *ngFor="let nut of nutritionData"><td>{{nut.nutriment}}</td><td>{{nut.value}}</td></tr>
        </tbody>
      </table>
      <h6>Conseil :</h6>
      <p>{{nutritionAdvice}}</p>
    </div>
    <div *ngIf="activeTab === 'fitness'">
      <h5>Statistiques Fitness</h5>
      <table class="table table-bordered">
        <thead><tr><th>Indicateur</th><th>Valeur</th></tr></thead>
        <tbody>
          <tr *ngFor="let stat of fitnessStats"><td>{{stat.label}}</td><td>{{stat.value}}</td></tr>
        </tbody>
      </table>
      <h6>Progression collective</h6>
      <div class="progress mb-2">
        <div class="progress-bar bg-info" [style.width]="fitnessProgress + '%'">{{fitnessProgress}}% des utilisateurs ont progressé ce mois-ci</div>
      </div>
      <p>{{fitnessTip}}</p>
    </div>
    <div *ngIf="activeTab === 'kpi'">
      <h5>KPIs Business</h5>
      <table class="table table-bordered">
        <thead><tr><th>KPI</th><th>Valeur</th></tr></thead>
        <tbody>
          <tr *ngFor="let kpi of kpiData"><td>{{kpi.label}}</td><td>{{kpi.value}}</td></tr>
        </tbody>
      </table>
      <h6>À surveiller :</h6>
      <p>{{kpiAdvice}}</p>
    </div>
  </div>
</div>
